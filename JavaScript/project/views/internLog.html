<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="../layui/css/layui.css">
  <style>
    .header { margin: 20px 30px 0 30px; }
    .container { margin: 0px 30px 20px 30px; }
    .layui-field-title { margin-bottom: 10px }
    #detail { padding: 20px; line-height: 27px;}
    #detail span { font-weight: 500; margin-right: 5px; }
  </style>
  <title>实习日志管理</title>
</head>
<body class="layui-bg-gray">

  <div style="background-color: #fff;padding: 15px; margin: 20px;">
    <div class="header">
      <fieldset class="layui-elem-field  layui-field-title">
        <legend>实习日志管理</legend>
        <div class="layui-field-box">
          <form class="layui-form" lay-filter="searchData">
            <div class="layui-form-item layui-inline" style="margin-top: 10px;">
                <label class="layui-form-label" style="width: 30px; padding: 4px 15px;">姓名</label>
                <input type="text" name="title" style="height: 30px;" placeholder="请输入姓名" autocomplete="off" class="layui-input layui-input-inline">
                <button class="layui-btn layui-btn-sm layui-btn-normal" style="margin-left: 20px; padding: 0 20px;">确认查询</button>
            </div>
          </form>
        </div>
      </fieldset>
    </div>
    
    <div class="container">
      <!-- 表格 -->
      <table id="classInfo" lay-filter="table"></table>
      <script type="text/html" id="tableTool">
        <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
      </script>
      <!-- 新增按钮 -->
      <a style="margin-top: 10px; margin-bottom: 15px; padding: 0 20px;" class="layui-btn layui-btn-normal layui-btn-sm" lay-event="add" href="##" target="adminBody">导出日志记录</a>
      <a style="margin-top: 10px; margin-bottom: 15px; padding: 0 20px;" class="layui-btn layui-btn-normal layui-btn-sm" lay-event="add" href="##" target="adminBody">批量删除</a>
    </div>
  </div>



  <script src="../layui/layui.js"></script>
  <script src="../js/jquery.min.js"></script>
  <script>

    // 初始化的数据
    let colsInitData = [
      {type:'numbers'},
      {type:'checkbox'},
      {field: 'name', title: '姓名', width: '110', align:'center'},
      {field: 'date', title: '日期', width: '110', align:'center'},
      {field: 'content', title: '实习内容', width: '180', align:'center'},
      {field: 'problem', title: '存在的问题', width: '400', align:'center'},
      {field: 'toolbar', title: '操作', width:120, align:'center', toolbar: '#tableTool'}
    ]

    // 使用form组件
    layui.use('form', function(){
      var form = layui.form;
     
    });

    // 使用table组件
    layui.use('table', function(){
      var table = layui.table
      //第一个实例
      table.render({
        elem: '#classInfo',
        page: true, //开启分页
        cols: [colsInitData],
        data: [
          {
            name: 'smallyu',
            date: '2018.03.16',
            content: 'JavaScript的基本语法',
            problem: '箭头函数中的this变量与传统this变量指定的对象有何差异？',
            detail: '箭头函数是没有this变量的，在箭头函数中使用this，this会自动到父级元素中去寻找，因此表面上使用箭头函数可以避免在回调函数中this变量的指向问题'
          },{
            name: 'smallyu',
            date: '2018.03.16',
            content: 'JavaScript的基本语法',
            problem: '箭头函数中的this变量与传统this变量指定的对象有何差异？',
            detail: '箭头函数是没有this变量的，在箭头函数中使用this，this会自动到父级元素中去寻找，因此表面上使用箭头函数可以避免在回调函数中this变量的指向问题'
          },{
            name: 'smallyu',
            date: '2018.03.16',
            content: 'JavaScript的基本语法',
            problem: '箭头函数中的this变量与传统this变量指定的对象有何差异？',
            detail: '箭头函数是没有this变量的，在箭头函数中使用this，this会自动到父级元素中去寻找，因此表面上使用箭头函数可以避免在回调函数中this变量的指向问题'
          },{
            name: 'smallyu',
            date: '2018.03.16',
            content: 'JavaScript的基本语法',
            problem: '箭头函数中的this变量与传统this变量指定的对象有何差异？',
            detail: '箭头函数是没有this变量的，在箭头函数中使用this，this会自动到父级元素中去寻找，因此表面上使用箭头函数可以避免在回调函数中this变量的指向问题'
          },{
            name: 'smallyu',
            date: '2018.03.16',
            content: 'JavaScript的基本语法',
            problem: '箭头函数中的this变量与传统this变量指定的对象有何差异？',
            detail: '箭头函数是没有this变量的，在箭头函数中使用this，this会自动到父级元素中去寻找，因此表面上使用箭头函数可以避免在回调函数中this变量的指向问题'
          },{
            name: 'smallyu',
            date: '2018.03.16',
            content: 'JavaScript的基本语法',
            problem: '箭头函数中的this变量与传统this变量指定的对象有何差异？',
            detail: '箭头函数是没有this变量的，在箭头函数中使用this，this会自动到父级元素中去寻找，因此表面上使用箭头函数可以避免在回调函数中this变量的指向问题'
          }
        ]
      });

      table.on('tool(table)', function (obj) {
        let data = obj.data,
          layEvent = obj.event
        console.log(data)
        let str = '<div id=\"detail\"><span>日期：</span>'
          + data.date
          + '<br><span>内容：</span>'
          + data.content
          + '<br><span>问题：</span>'
          + data.problem
          + '<br><span>描述：</span>'
          + data.detail
          + '</div>'
        if (layEvent === 'detail') {
          layer.open({
            type:1,
            content: str,
            title: data.name,
            shadeClose: true,
            anim: 0,
            maxmin: true,
            area: '500px'
          })          


        } else if(layEvent === 'del'){
          layer.confirm('确认删除这条记录？', {title: '警告'}, function(index){
            obj.del(); //删除对应行（tr）的DOM结构
            layer.close(index);
            //向服务端发送删除指令
          });
        }
      })
    });
    
  </script>
</body>
</html>